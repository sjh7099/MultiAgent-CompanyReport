from models import (
    Agent3Output,
    스펙비교,
    JD정보,
    자소서문항,
    면접질문,
    시각화
)

def run_agent3(company: str, job: str, user_spec: dict) -> Agent3Output:
    return Agent3Output(
        기업명=company,
        직무명=job,
        합격자_비교=스펙비교(
            컬럼=["학력", "전공", "어학", "자격증", "수상", "인턴"],
            데이터=[
                {"이름": "A", "학력": "서울대", "전공": "전기전자", "어학": "토익 960", "자격증": "정보처리기사", "수상": "SW경진대회 은상", "인턴": "삼성전자"},
                {"이름": "B", "학력": "카이스트", "전공": "컴퓨터", "어학": "오픽 AL", "자격증": "SQLD", "수상": "-", "인턴": "카카오"},
                {"이름": "사용자", **user_spec}
            ]
        ),
        JD_정보=JD정보(
            채용유형="신입",
            담당업무=["백엔드 API 개발", "시스템 운영 자동화"],
            근무조건="서울 본사 / 주 5일 / 정규직",
            지원자격_우대사항={
                "필수": ["Python 또는 Java 기반 개발 경험", "컴퓨터공학 계열 전공"],
                "우대": ["AWS 경험자", "CI/CD 구축 경험"]
            }
        ),
        자소서_질문=[
            자소서문항(
                문항="지원 동기와 입사 후 포부를 기술하십시오 (700자)",
                토픽=["기업 가치관 공감", "기술 분야 성장", "장기적 커리어 목표"]
            ),
            자소서문항(
                문항="본인의 성장 과정 중 가장 의미 있었던 경험을 설명하십시오 (1000자)",
                토픽=["리더십 경험", "협업", "실패 극복"]
            )
        ],
        면접_정보={
            "특징_후기": {
                "신입": "경직되기보단 편안한 분위기에서 이력서를 바탕으로 질문이 이어졌습니다.",
                "경력": "기술 스택에 대한 깊은 질문과 프로젝트 중심의 대화가 주를 이룸."
            },
            "질문_리스트": [
                면접질문(질문="최근에 도전했던 프로젝트는 무엇인가요?", 유형="1"),
                면접질문(질문="팀 내 갈등을 어떻게 해결했나요?", 유형="2"),
                면접질문(질문="본인이 가장 자신있는 기술은?", 유형="3"),
                면접질문(질문="당신을 한 단어로 표현하면?", 유형="4"),
            ]
        },
        시각화=시각화(
            설명="사용자와 합격자의 스펙 비교 레이더 차트",
            이미지_base64="<base64_encoded_radar_chart>"
        )
    )
